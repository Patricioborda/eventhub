{% extends "base.html" %}
{% block content %}
<div class="containerFavoritos my-5">
  <h2 class="mb-4 tituloFavoritos">‚≠ê Mis Eventos Favoritos</h2>
  <button id="toggleView" class="btn btn-sm btn-outline-secondary">Ver como tarjetas</button>

  {% if events %}
  <!-- Vista tabla -->
  <div class="table-wrapper-fav">
    <div class="draggable-scroll" id="favTableScroll">
      <table class="table table-hover table-fav">
        <thead class="table-light">
          <tr>
            <th>T√≠tulo</th>
            <th>Fecha</th>
            <th>Organizador</th>
            <th class="text-end">Acciones</th>
          </tr>
        </thead>
        <tbody>
          {% for event in events %}
          <tr>
            <td>{{ event.title }}</td>
            <td>{{ event.scheduled_at|date:"d/m/Y H:i" }}</td>
            <td>{{ event.organizer.username }}</td>
            <td class="text-end">
              <a href="{% url 'event_detail' event.id %}" class="btn btn-sm btn-outline-primary me-2" title="Ver detalle">
                <i class="bi bi-eye"></i>
              </a>
              <button class="btn btn-sm btn-fav-toggle" title="Quitar de favoritos" data-event-id="{{ event.id }}">
                <i class="bi bi-star-fill text-warning fav-glow"></i>
              </button>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Vista tarjetas -->
  <div id="cardView" class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 d-none mt-4">
    {% for event in events %}
    <div class="col">
      <div class="card tarjetaFav h-100">
        <div class="card-body">
          <h5 class="card-title">{{ event.title }}</h5>
          <p class="card-text"><i class="bi bi-calendar-event"></i> {{ event.scheduled_at|date:"d/m/Y H:i" }}</p>
          <p class="card-text"><i class="bi bi-person"></i> {{ event.organizer.username }}</p>
        </div>
        <div class="card-footer d-flex justify-content-between align-items-center">
          <a href="{% url 'event_detail' event.id %}" class="btn btn-sm btn-outline-primary me-2" title="Ver detalle">
            <i class="bi bi-eye"></i>
          </a>
          <button class="btn btn-sm btn-fav-toggle" title="Quitar de favoritos" data-event-id="{{ event.id }}">
            <i class="bi bi-star-fill text-warning fav-glow"></i>
          </button>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  {% else %}
    <div class="empty-state text-center p-5">
      <div class="icon mb-3">üåü</div>
      <h4 class="text-dark">A√∫n no ten√©s eventos favoritos</h4>
      <p class="text-muted">Marc√° eventos con la estrella para tenerlos siempre a mano.</p>
    </div>
  {% endif %}
</div>
{% endblock %}