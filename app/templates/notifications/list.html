{% extends "base.html" %}
{% block content %}
<h2 class="mb-3">Tus notificaciones</h2>

<table class="table table-sm">
  {% for n in object_list %}
    <tr class="{% if not n.is_read %}table-warning{% endif %}">
      <td>{{ n.created_at|date:"d/m/Y H:i" }}</td>
      <td>
        <strong>{{ n.title }}</strong><br>
        {{ n.message }}
      </td>
      <td>{{ n.get_priority_display }}</td>
      <td class="text-end">
        {% if not n.is_read %}
          <form action="{% url 'notifications:read' n.pk %}" method="post" style="display:inline">
            {% csrf_token %}
            <button class="btn btn-success btn-sm">Leer</button>
          </form>
        {% endif %}
        {% if user.is_organizer %}
          <a href="{% url 'notifications:edit' n.pk %}" class="btn btn-primary btn-sm">Editar</a>
          <a href="{% url 'notifications:delete' n.pk %}" class="btn btn-danger btn-sm">Eliminar</a>
        {% endif %}
      </td>
    </tr>
  {% empty %}
    <tr><td colspan="4">No tenés notificaciones.</td></tr>
  {% endfor %}
</table>

{% if user.is_organizer %}
  <a href="{% url 'notifications:create' %}" class="btn btn-outline-primary">+ Nueva notificación</a>
{% endif %}
{% endblock %}
